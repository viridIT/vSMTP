### DO NOT EDIT THIS FILE
### Default values used by vSMTP server
### This is documentation only : any changes will be ignored

domain = "mydomain.com"

[server]
### local address of the listeners
addr = "0.0.0.0:25"

[log]
file = "/var/log/vsmtp/vsmtp.log"

[log.level]
### Log level of the different part of the program
### { key: [default/receiver/resolver/rules], value: [trace/debug/info/warn/error/off] }
default = "warn"

[rules]
dir = "/etc/vsmtp/rules"

[tls]
### Define the behaviour of the SSL/TLS connection, value can be:
### * None    => STARTTLS result a "454 TLS not available"
### * May     => allow both clair and secured messaging
### * Encrypt => NO STARTTLS result a "530 Must issue a STARTTLS"
security_level = "May"

### Option path for the certificats and keys (default: undefined)
capath = "/etc/vsmtp/certs"

### Use the server's prefered cipherlist instead of the client one
preempt_cipherlist = false

### Maximum delay for the handshake SSL/TLS
handshake_timeout = "5s"

### Default domain certificate file
fullchain = "{capath}/fullchain.{domain}.pem"
### Default domain private key
private_key = "{capath}/rsa.{domain}.pem"

protocol_version = "^TLSv1.3"


### Maps for the "Server Name Indication" during the SSL/TLS handshake
### Example:
#
# [[tls.sni_maps]]
# domain = "test1.server.com"
# fullchain = "{capath}/fullchain.{domain}.pem"
# private_key = "{capath}/rsa.{domain}.pem"
#
# [[tls.sni_maps]]
# domain = "test2.server.com"
# fullchain = "{capath}/fullchain.{domain}.pem"
# private_key = "{capath}/rsa.{domain}.pem"

[smtp]
### Root path for the storage of the mail received
spool_dir = "/var/spool/vsmtp"
### Maximum number of recipients per mail.
rcpt_count_max = 25
### You might want (not recommanded) to disable EHLO (and ESMTP),
### in that case vSMTP will reply a 502 unimplemented code.
disable_ehlo = false

[smtp.timeout_client]
### After receiving a message {key}, wait maximum the delay {value}
### Or result a timeout and close the connection
Connect = "5min"
Helo = "5min"
MailFrom = "5min"
RcptTo = "5min"
Data = "5min"

### vSMTP keep the count of the client's error
[smtp.error]
### if {error} > {soft_count} then the connection will be delayed for {delay}
### soft_count = -1 to disable this feature
soft_count = -1
### if {error} > {hard_count} then the connection will be closed
### hard_count = -1 to disable this feature
hard_count = -1
delay = "1000ms"

### Message sent to the client in the different scenario
### Fully customizable, but be carefull to follow the RFC
### See https://datatracker.ietf.org/doc/html/rfc5321#section-4.2
[smtp.code]
Code214 = "214 joining us https://viridit.com/support\r\n"
Code220 = "220 {domain} Service ready\r\n"
Code221 = "221 Service closing transmission channel\r\n"
Code250 = "250 Ok\r\n"
Code250PlainEsmtp = "250-{domain}\r\n250-8BITMIME\r\n250-SMTPUTF8\r\n250 STARTTLS\r\n"
Code250SecuredEsmtp = "250-{domain}\r\n250-8BITMIME\r\n250 SMTPUTF8\r\n"
Code354 = "354 Start mail input; end with <CRLF>.<CRLF>\r\n"
Code451 = "451 Requested action aborted: local error in processing\r\n"
Code451Timeout = "451 Timeout - closing connection.\r\n"
Code451TooManyError = "451 Too many errors from the client\r\n"
Code452 = "452 Requested action not taken: insufficient system storage\r\n"
Code452TooManyRecipients = "452 Requested action not taken: to many recipiants\r\n"
Code454 = "454 TLS not available due to temporary reason\r\n"
Code500 = "500 Syntax error command unrecognized\r\n"
Code501 = "501 Syntax error in parameters or arguments\r\n"
Code502unimplemented = "502 Command not implemented\r\n"
Code503 = "503 Bad sequence of commands\r\n"
Code504 = "504 Command parameter not implemented\r\n"
Code530 = "530 Must issue a STARTTLS command first\r\n"
Code554 = "554 permanent problems with the remote server\r\n"
Code554tls = "554 Command refused due to lack of security\r\n"
